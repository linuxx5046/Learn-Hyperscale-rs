graph TD
    START["â±ï¸ Round Timeout<br/>Leader Does Not Propose"] --> DETECT["ğŸš¨ Detect Failure<br/>Waited X seconds"]
    
    DETECT --> UNLOCK["ğŸ”“ Unlock Vote<br/>Remove Vote Lock"]
    
    UNLOCK --> INCREASE_VIEW["ğŸ“ˆ Increment View<br/>View += 1<br/>Round += 1"]
    
    INCREASE_VIEW --> NEW_LEADER["ğŸ‘‘ New Leader<br/>Leader = Validator[Round % N]"]
    
    NEW_LEADER --> LEADER_CHECK{"New Leader<br/>is Honest?"}
    
    LEADER_CHECK -->|No| TIMEOUT_AGAIN["â±ï¸ Timeout Again<br/>Repeat View Change"]
    TIMEOUT_AGAIN --> INCREASE_VIEW
    
    LEADER_CHECK -->|Yes| PROPOSE_NEW["ğŸ“ New Leader Proposes<br/>Block with HighQC"]
    
    PROPOSE_NEW --> SYNC["ğŸ”„ Synchronization<br/>Nodes Receive Proposal"]
    
    SYNC --> VALIDATE["âœ… Validate Block<br/>- Valid Parent QC<br/>- Signature OK"]
    
    VALIDATE -->|Invalid| REJECT["âŒ Rejects<br/>New Timeout"]
    REJECT --> INCREASE_VIEW
    
    VALIDATE -->|Valid| VOTE_NEW["ğŸ—³ï¸ Vote on New Block"]
    
    VOTE_NEW --> COLLECT["ğŸ“Š Collect Votes<br/>2f+1 Required"]
    
    COLLECT --> QC_NEW["ğŸ–ï¸ QC Created<br/>System Recovered"]
    
    QC_NEW --> PROGRESS["âœ… System Progresses<br/>Consensus Restored"]
    
    PROGRESS --> END["ğŸ Back to Normal"]
    
    style START fill:#ff6b6b,stroke:#c92a2a,color:#fff
    style DETECT fill:#ffd43b,stroke:#f59f00,color:#000
    style UNLOCK fill:#4c6ef5,stroke:#1971c2,color:#fff
    style NEW_LEADER fill:#51cf66,stroke:#2f9e44,color:#fff
    style QC_NEW fill:#da77f2,stroke:#9c36b5,color:#fff
    style PROGRESS fill:#9c36b5,stroke:#6c2a8f,color:#fff
